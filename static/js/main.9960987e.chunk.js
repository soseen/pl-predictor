(this["webpackJsonppl-betting"]=this["webpackJsonppl-betting"]||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n,o,r=a(0),c=a.n(r),i=a(15),s=a.n(i),l=(a(78),a(10)),d=a(139),u=a(152),b=a(3),p=a(1);function m(e,t){switch(t.type){case n.setUser:return Object(b.a)(Object(b.a)({},e),{},{user:t.payload});default:return e}}!function(e){e.setUser="SetUser"}(n||(n={})),function(e){e.user="User",e.admin="Admin"}(o||(o={}));var j,x=Object(r.createContext)(null),h=Object(r.createContext)((function(){})),f=function(e){var t=e.children,a=Object(r.useReducer)(m,{}),n=Object(l.a)(a,2),o=n[0],c=n[1];return Object(p.jsx)(x.Provider,{value:o,children:Object(p.jsx)(h.Provider,{value:c,children:t})})},O=a(65),g=a.n(O);function v(e,t){switch(t.type){case j.setIsFetching:return t.payload;default:return e}}!function(e){e.setIsFetching="SetIsFetching"}(j||(j={}));var y,w=Object(r.createContext)(!1),k=Object(r.createContext)((function(){return null})),C=function(e){var t=e.children,a=Object(r.useReducer)(v,!1),n=Object(l.a)(a,2),o=n[0],c=n[1];return Object(p.jsx)(w.Provider,{value:o,children:Object(p.jsx)(k.Provider,{value:c,children:t})})},S=a(8),N=a(138),T=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{header:{boxSizing:"border-box",width:"100%",position:"fixed",top:0,left:0,color:"#fff",zIndex:100},navigation:Object(S.a)({padding:"20px",boxSizing:"border-box",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#00000099"},a.down("md"),{padding:"10px"}),navigationFilled:{backgroundColor:"#202020",borderBottom:"3px solid ".concat(t.secondary.dark)},loader:{position:"fixed",zIndex:500,top:"80px",width:"100%"},logo:{width:"100px",height:"auto",marginRight:"auto"},username:Object(S.a)({marginRight:"10px"},a.down("md"),{display:"none"}),button:Object(S.a)({backgroundColor:t.secondary.main,textTransform:"capitalize",fontWeight:"bold",marginRight:"5px"},a.down("md"),{fontSize:"0.7rem",padding:"5px 10px"})}})),I=a(19),R=a.n(I),B=a.p+"static/media/predictor-logo.5b405207.png",P=function(e){var t,a=e.setIsModalOpen,o=T(),c=Object(r.useContext)(x),i=Object(r.useContext)(h),s=Object(r.useContext)(w),b=Object(r.useState)(!1),m=Object(l.a)(b,2),j=m[0],f=m[1],O=function(){window.scrollY>50?f(!0):f(!1)};Object(r.useEffect)((function(){return document.addEventListener("scroll",O),function(){document.removeEventListener("scroll",O)}}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("header",{className:o.header,children:Object(p.jsxs)("div",{className:j?R()(o.navigation,o.navigationFilled):o.navigation,children:[Object(p.jsx)("img",{src:B,className:o.logo}),Object(p.jsx)(d.a,{variant:"body1",className:o.username,children:null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.username}),(null===c||void 0===c?void 0:c.user)?Object(p.jsx)(u.a,{variant:"contained",className:o.button,onClick:function(){i({type:n.setUser,payload:void 0}),localStorage.setItem("user",JSON.stringify(null))},children:"Log Out"}):Object(p.jsx)(u.a,{variant:"contained",className:o.button,onClick:function(){return a({isOpen:!0,target:"log-in"})},children:"Log In"}),Object(p.jsx)(u.a,{variant:"contained",className:o.button,onClick:function(){return a({isOpen:!0,target:"register"})},children:"Register"})]})}),Object(p.jsx)("div",{className:o.loader,children:Object(p.jsx)(g.a,{loading:s,color:"#f88a62"})})]})},z=a(13),F=a.n(z),M=a(21),E=a(149),U=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{container:Object(S.a)({width:"100%",marginTop:"62px",padding:"15px",boxSizing:"border-box",boxShadow:"2px 2px 10px 5px #00000090",backgroundColor:"#2a2a2a",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},a.up("md"),{margin:"20px auto",marginTop:"110px",maxWidth:"1100px"}),error:{margin:"auto",padding:"20px",backgroundColor:t.secondary.dark,borderRadius:"2px",boxShadow:"2px 2px 15px 5px #00000060"},mainContent:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap"},rulesContainer:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",backgroundColor:"#2f2f2f",padding:"10px",borderRadius:"2px"},rulesTitle:{textAlign:"left"},rulesList:{width:"100%",listStyle:"none",textAlign:"left",marginBlockStart:"10px",marginBlockEnd:0,paddingInlineStart:0},rule:{display:"flex",alignItems:"center",marginBottom:"5px",flexShrink:0,"&::before":{content:"''",width:"6px",height:"6px",borderRadius:"50%",marginRight:"8px",flexShrink:0,backgroundColor:t.secondary.main}},ruleText:Object(S.a)({display:"flex",alignItems:"center"},a.down("md"),{display:"inline-block"}),accent:{color:t.secondary.main},accentGreen:{backgroundColor:"#39a350",padding:"2px",borderRadius:"2px"},accentBlue:{backgroundColor:"#3c87b5",padding:"2px",borderRadius:"2px"}}}));function A(e,t){switch(t.type){case y.setFixtures:return Object(b.a)(Object(b.a)({},e),{},{fixtures:t.payload});case y.setPrediction:var a;return Object(b.a)(Object(b.a)({},e),{},{fixtures:null===(a=e.fixtures)||void 0===a?void 0:a.map((function(e){return e.id===t.payload.id?t.payload:e}))});case y.setBoostedPrediction:var n;return Object(b.a)(Object(b.a)({},e),{},{fixtures:null===(n=e.fixtures)||void 0===n?void 0:n.map((function(e){return e.id===t.payload.id?Object(b.a)(Object(b.a)({},e),{},{isBoosted:!0}):Object(b.a)(Object(b.a)({},e),{},{isBoosted:!1})}))});default:return e}}!function(e){e.setFixtures="SetFixtures",e.setPrediction="setPrediction",e.setBoostedPrediction="setBoostedPrediction"}(y||(y={}));var L,W=Object(r.createContext)({}),D=Object(r.createContext)((function(){})),G=function(e){var t=e.children,a=Object(r.useReducer)(A,{}),n=Object(l.a)(a,2),o=n[0],c=n[1];return Object(p.jsx)(W.Provider,{value:o,children:Object(p.jsx)(D.Provider,{value:c,children:t})})},H=Object(r.createContext)([]),J=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{container:Object(S.a)({width:"100%",textAlign:"left",flexBasis:"100%",display:"flex",marginBottom:"20px"},a.up("md"),{flexBasis:"68%"}),messageContainer:{width:"100%",textAlign:"center",flexBasis:"100%",display:"flex",flexDirection:"column",marginBottom:"20px",height:"200px",justifyContent:"center",alignItems:"center"},table:{width:"100%",margin:"auto",borderRadius:"2px"},tableName:{backgroundColor:t.secondary.dark,textAlign:"center",padding:"10px",borderRadius:"2px",color:"#fff"},row:{backgroundColor:"#404010"},button:{backgroundColor:t.secondary.light,textTransform:"capitalize",fontWeight:"bold",padding:"10px 50px",marginTop:"10px"},submitButton:{marginTop:"10px",backgroundColor:t.secondary.dark,width:"100%",color:"#fff",padding:"10px","&:hover":{backgroundColor:t.secondary.main}},label:{color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",marginRight:"8px",fontSize:"0.8rem",flexWrap:"nowrap"},accent:{color:t.secondary.main},formControl:Object(S.a)({width:"100%",display:"flex",justifyContent:"space-between",margin:"10px 0"},a.up("sm"),{display:"none"}),select:{color:"#000",backgroundColor:t.secondary.main,padding:"5px",borderRadius:"2px",fontSize:"0.8rem"},customSelectMenu:{backgroundColor:t.secondary.main}}})),X=a(151),Y=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{row:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"10px",backgroundColor:"#ffffff",position:"relative",borderBottom:"1px solid #e0e0e0"},rowSubmitted:{backgroundColor:t.secondary.light},rowExactScore:{backgroundColor:"#39a350"},rowCorrectScore:{backgroundColor:"#3c87b5"},rowIncorrectScore:{backgroundColor:"#c74c4c"},bonusButton:Object(S.a)({display:"none","&:hover":{backgroundColor:t.secondary.dark}},a.up("sm"),{display:"flex",textTransform:"capitalize",boxShadow:"1px 1px 5px 1px #00000060",minWidth:"0",backgroundColor:"#4f4f4f",color:"#fff",borderRadius:"50%",padding:"6px",marginRight:"10px",fontSize:"1rem"}),boostIcon:Object(S.a)({},a.down("sm"),{width:"0.7em",height:"0.7em"}),bonusButtonPressed:{backgroundColor:t.secondary.main},teamName:{padding:"10px",flex:1,color:"#000"},nameText:Object(S.a)({fontSize:"0.75rem"},a.up("md"),{fontSize:"0.875rem"}),scoreInputs:{},scoreInput:Object(S.a)({outline:"none",backgroundColor:"#e0e0e0",width:"25px",height:"25px",border:"none",borderRadius:"2px",margin:"0 2px",textAlign:"center",fontSize:"0.8rem",cursor:"pointer"},a.up("md"),{fontSize:"1.2rem",width:"40px",height:"40px"}),span:{color:"#000"},crest:Object(S.a)({width:"20px",height:"20px",objectFit:"contain",background:"none",strokeOpacity:0,fill:"none",fillOpacity:.5,display:"none","&: > svg":{strokeOpacity:0,fill:"none",fillOpacity:.5}},a.up("md"),{display:"block",width:"30px",height:"30px"})}})),q=a(32),Z=a.n(q),K=function(e){var t,a,n,o,c,i,s,l,m=e.fixture,j=Y(),x=Object(r.useContext)(H),h=Object(r.useContext)(D),f=Object(r.useContext)(W),O=Object(b.a)(Object(b.a)({},m),{},{homeTeam:Object(b.a)(Object(b.a)({},m.homeTeam),{},{crestUrl:null===(t=x.find((function(e){return e.id===m.homeTeam.id})))||void 0===t?void 0:t.crestUrl}),awayTeam:Object(b.a)(Object(b.a)({},m.awayTeam),{},{crestUrl:null===(a=x.find((function(e){return e.id===m.awayTeam.id})))||void 0===a?void 0:a.crestUrl})});return Object(p.jsxs)(E.a,{className:m.isSubmited?R()(j.rowSubmitted,j.row):j.row,children:[Object(p.jsx)(u.a,{className:m.isBoosted?R()(j.bonusButtonPressed,j.bonusButton):j.bonusButton,onClick:function(){var e;!!(null===f||void 0===f||null===(e=f.fixtures)||void 0===e?void 0:e.find((function(e){return e.isBoosted&&e.isSubmited})))||m.isSubmited||h({type:y.setBoostedPrediction,payload:{id:m.id}})},title:"double points boost",children:Object(p.jsx)(Z.a,{className:j.boostIcon})}),Object(p.jsx)("img",{className:j.crest,src:O.homeTeam.crestUrl,alt:O.homeTeam.name}),Object(p.jsx)("div",{className:j.teamName,children:Object(p.jsx)(d.a,{variant:"body2",className:j.nameText,children:m.homeTeam.name.substring(0,m.homeTeam.name.length-3)})}),Object(p.jsxs)("div",{className:j.scoreInputs,children:[Object(p.jsx)("input",{disabled:O.isSubmited,className:j.scoreInput,type:"text",value:(null===(n=O.prediction)||void 0===n?void 0:n.homeTeamScore)||0===(null===(o=O.prediction)||void 0===o?void 0:o.homeTeamScore)?null===(c=O.prediction)||void 0===c?void 0:c.homeTeamScore:"",onChange:function(e){return h({type:y.setPrediction,payload:Object(b.a)(Object(b.a)({},m),{},{prediction:Object(b.a)(Object(b.a)({},m.prediction),{},{homeTeamScore:e.target.value})})})},maxLength:2}),Object(p.jsx)("span",{className:j.span,children:" : "}),Object(p.jsx)("input",{disabled:O.isSubmited,className:j.scoreInput,type:"text",value:(null===(i=O.prediction)||void 0===i?void 0:i.awayTeamScore)||0===(null===(s=O.prediction)||void 0===s?void 0:s.awayTeamScore)?null===(l=O.prediction)||void 0===l?void 0:l.awayTeamScore:"",onChange:function(e){return h({type:y.setPrediction,payload:Object(b.a)(Object(b.a)({},m),{},{prediction:Object(b.a)(Object(b.a)({},m.prediction),{},{awayTeamScore:e.target.value})})})},maxLength:2})]}),Object(p.jsx)("div",{className:j.teamName,children:Object(p.jsx)(d.a,{variant:"body2",className:j.nameText,style:{textAlign:"right"},children:m.awayTeam.name.substring(0,m.awayTeam.name.length-3)})}),Object(p.jsx)("img",{className:j.crest,src:O.awayTeam.crestUrl,alt:O.awayTeam.name})]})},Q=a(66),V=a.n(Q).a.create({baseURL:"https://pl-predictor-backend.herokuapp.com/",timeout:3e3,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}}),$=function(e){var t,a,n,o=e.setIsModalOpen,c=e.matchdayNumber,i=e.seasonId,s=J(),l=Object(r.useContext)(W),m=Object(r.useContext)(D),h=Object(r.useContext)(x),f=Object(r.useContext)(k),O=!!(null===l||void 0===l||null===(t=l.fixtures)||void 0===t?void 0:t.find((function(e){return e.isBoosted&&e.isSubmited}))),g=function(){var e=Object(M.a)(F.a.mark((function e(){var t,a,n,o,r,s,d;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f({type:j.setIsFetching,payload:!0}),e.prev=1,e.next=4,V.post("/gameweek",{gameweek:c,seasonId:i,UserId:null===h||void 0===h||null===(t=h.user)||void 0===t?void 0:t.id});case 4:return o=e.sent,r=[],null===(s=null===(a=l.fixtures)||void 0===a?void 0:a.filter((function(e){return e.prediction.homeTeamScore&&e.prediction.awayTeamScore&&!e.isResolved})).map((function(e){return e.isBoosted?Object(b.a)(Object(b.a)({},e),{},{isBoosted:!0}):Object(b.a)(Object(b.a)({},e),{},{isBoosted:!1})})))||void 0===s||s.forEach((function(e){r.push(V.post("/prediction",Object(b.a)(Object(b.a)({},e),{},{GameweekPredictionId:o.data.gameweek[0].id})).catch((function(e){return console.log(e)})))})),d=null===(n=l.fixtures)||void 0===n?void 0:n.map((function(e){var t=null===s||void 0===s?void 0:s.find((function(t){return t.id===e.id}));return t?Object(b.a)(Object(b.a)({},e),{},{prediction:{homeTeamScore:t.prediction.homeTeamScore,awayTeamScore:t.prediction.awayTeamScore},isSubmited:!0,isResolved:!1,isBoosted:t.isBoosted}):e})),m({type:y.setFixtures,payload:d}),e.next=12,Promise.all(r);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:f({type:j.setIsFetching,payload:!1});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),v=Object(r.useMemo)((function(){var e,t,a=null===l||void 0===l||null===(e=l.fixtures)||void 0===e||null===(t=e.find((function(e){return e.isBoosted})))||void 0===t?void 0:t.id;return null!==a&&void 0!==a?a:""}),[l.fixtures]);return Object(p.jsx)("div",{className:s.container,children:(null===h||void 0===h?void 0:h.user)?Object(p.jsxs)("div",{className:s.table,children:[Object(p.jsx)(d.a,{className:s.tableName,variant:"body1",children:"Upcoming Matches"}),null===(a=l.fixtures)||void 0===a?void 0:a.map((function(e){return Object(p.jsx)(K,{fixture:e},e.id)})),Object(p.jsxs)("div",{className:s.formControl,children:[Object(p.jsxs)("div",{className:s.label,children:[Object(p.jsx)("span",{className:s.accent,children:Object(p.jsx)(Z.a,{})})," Boost"]}),Object(p.jsxs)(X.a,{className:s.select,value:v,onChange:function(e){var t,a=e.target,n=null===(t=l.fixtures)||void 0===t?void 0:t.find((function(e){return e.id===parseInt(a.value)}));O||(null===n||void 0===n?void 0:n.isSubmited)||m({type:y.setBoostedPrediction,payload:{id:null===n||void 0===n?void 0:n.id}})},classes:{selectMenu:s.customSelectMenu},inputProps:{className:s.customSelectMenu},disabled:O,children:[Object(p.jsx)("option",{value:""}),null===(n=l.fixtures)||void 0===n?void 0:n.map((function(e){return Object(p.jsx)("option",{className:s.customSelectMenu,value:e.id,children:"".concat(e.homeTeam.name.substring(0,e.homeTeam.name.length-3)," - ").concat(e.awayTeam.name.substring(0,e.awayTeam.name.length-3))},e.id)}))]})]}),Object(p.jsx)(u.a,{variant:"contained",className:s.submitButton,onClick:g,children:"Submit"})]}):Object(p.jsxs)("div",{className:s.messageContainer,children:[Object(p.jsx)(d.a,{variant:"body1",children:"Log in to place your predictions..."}),Object(p.jsx)(u.a,{variant:"contained",onClick:function(){return o({isOpen:!0,target:"log-in"})},className:s.button,children:"Log In"})]})})},_=a(148),ee=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{container:Object(S.a)({width:"100%",textAlign:"left",flexBasis:"100%",display:"flex",flexDirection:"column",marginBottom:"10px"},a.up("md"),{flexBasis:"28%",flexGrow:1,marginLeft:"10px"}),tableContainer:{width:"100%",margin:"auto",borderRadius:"2px",boxShadow:"1px 1px 10px 3px #00000060"},tableName:{backgroundColor:t.secondary.dark,textAlign:"center",padding:"10px",borderRadius:"2px",color:"#fff"},table:{width:"100%",tableLayout:"fixed"},tableRow:{backgroundColor:"#fff",cursor:"pointer","&:hover":{backgroundColor:"#e0e0e0"}},tableHeadRow:{backgroundColor:t.secondary.light,fontWeight:"bolder"},button:{width:"100%",marginTop:"10px",padding:"10px",backgroundColor:t.secondary.dark,color:"#fff","&:hover":{backgroundColor:t.secondary.main}},userLink:{cursor:"pointer"},showMore:{width:"100%",margin:"10px 0",color:"#fff",display:"flex",justifyContent:"center"},openTableModal:{margin:"auto",color:"#fff",cursor:"pointer"}}})),te=a(141),ae=a(142),ne=a(143),oe=a(144),re=a(145),ce=a(146),ie=a(150),se=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{dialogMain:Object(S.a)({width:"100%",display:"flex",flexDirection:"column",margin:"20px",alignItems:"center",padding:"5px",backgroundColor:t.secondary.main,color:"#fff",boxSizing:"border-box"},a.up("md"),{minWidth:"400px"}),username:{width:"100%",padding:"10px",borderRadius:"2px",backgroundColor:t.secondary.dark,textAlign:"center",boxSizing:"border-box"},title:{padding:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#000"},userPredictions:{width:"100%",marginTop:"10px",display:"flex",flexDirection:"column",alignItems:"center"},tableContainer:{width:"100%",maxHeight:"600px",overflowY:"auto"},table:{width:"100%",margin:"auto",marginBottom:"20px",borderRadius:"2px",backgroundColor:t.secondary.light},scoreWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},row:Object(S.a)({width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"5px 10px",backgroundColor:"#ffffff",position:"relative",borderRadius:"2px",borderBottom:"1px solid #e0e0e0",boxSizing:"border-box"},a.down("md"),{padding:"2px"}),rowBoosted:{backgroundColor:t.secondary.dark,borderBottom:"1px solid ".concat(t.secondary.main)},teamName:Object(S.a)({padding:"10px",flex:1,color:"#000",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden","& > :nth-child(2)":{textAlign:"right",backgroundColor:"red"}},a.down("md"),{fontSize:"0.7rem",padding:"8px 5px"}),name:Object(S.a)({},a.down("md"),{fontSize:"0.75rem"}),crest:Object(S.a)({width:"15px",height:"15px",objectFit:"contain",background:"none",strokeOpacity:0,fill:"none",fillOpacity:.5,display:"none","&: > svg":{strokeOpacity:0,fill:"none",fillOpacity:.5}},a.up("md"),{display:"block",width:"25px",height:"25px"}),score:Object(S.a)({outline:"none",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e0e0e0",width:"20px",height:"20px",border:"none",borderRadius:"2px",margin:"0 5px",textAlign:"center",cursor:"pointer",color:"#000"},a.up("md"),{fontSize:"1rem",width:"30px",height:"30px"}),exactScore:{backgroundColor:"#39a350"},correctScore:{backgroundColor:"#3c87b5"},incorrectScore:{backgroundColor:"#c74c4c"},span:{color:"#000"},points:{padding:"5px",borderRadius:"2px",backgroundColor:t.secondary.dark,color:"#fff"}}})),le=function(e){var t=e.isOpen,a=e.setIsOpen,n=e.player,o=(e.matchdayNumber,se()),c=Object(r.useContext)(H),i=Object(r.useState)([]),s=Object(l.a)(i,2),u=s[0],m=s[1],x=Object(r.useContext)(k),h=function(){var e=Object(M.a)(F.a.mark((function e(){var t,a,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x({type:j.setIsFetching,payload:!0}),e.prev=1,e.next=4,V.post("/userPredictions",{id:null===n||void 0===n?void 0:n.id});case 4:t=e.sent,(a=t.data.userPredictions)&&(o=[],a.forEach((function(e){var t=e.matchPredictions.reduce((function(e,t){return e+=t.points}),0);o.push(Object(b.a)(Object(b.a)({},e),{},{points:t}))})),o.sort((function(e,t){return t.gameweek-e.gameweek})),m(o)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:x({type:j.setIsFetching,payload:!1});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){t&&h()}),[t]);return Object(p.jsxs)(ie.a,{classes:{paper:o.dialogMain},open:t,onClose:function(){m([]),a(!1)},children:[Object(p.jsx)(d.a,{variant:"h5",component:"h2",className:o.username,children:null===n||void 0===n?void 0:n.username}),Object(p.jsx)(E.a,{className:o.userPredictions,children:u.length>0?Object(p.jsx)("div",{className:o.tableContainer,children:u.map((function(e){return Object(p.jsxs)("div",{className:o.table,children:[Object(p.jsxs)("div",{className:o.title,children:[Object(p.jsx)(d.a,{children:"Gameweek "+e.gameweek}),Object(p.jsx)(d.a,{className:o.points,children:1===e.points?e.points+" point":e.points+" points"})]}),Object(p.jsx)("div",{children:e.matchPredictions.map((function(e){var t,a;return Object(p.jsxs)("div",{className:e.isBoosted?R()(o.rowBoosted,o.row):o.row,children:[Object(p.jsx)("img",{className:o.crest,src:null===(t=c.find((function(t){return t.name===e.homeTeamName})))||void 0===t?void 0:t.crestUrl,alt:e.homeTeamName}),Object(p.jsx)("div",{className:o.teamName,children:Object(p.jsx)(d.a,{className:o.name,variant:"body2",children:e.homeTeamName.substring(0,e.homeTeamName.length-3)})}),Object(p.jsxs)("div",{className:o.scoreWrapper,children:[Object(p.jsx)(d.a,{className:e.isExactScore?R()(o.exactScore,o.score):e.isCorrectScore?R()(o.correctScore,o.score):e.isResolved?R()(o.incorrectScore,o.score):o.score,variant:"body2",children:e.homeTeamScore}),Object(p.jsx)("span",{className:o.span,children:" : "}),Object(p.jsx)(d.a,{className:e.isExactScore?R()(o.exactScore,o.score):e.isCorrectScore?R()(o.correctScore,o.score):e.isResolved?R()(o.incorrectScore,o.score):o.score,variant:"body2",children:e.awayTeamScore})]}),Object(p.jsx)("div",{className:o.teamName,children:Object(p.jsx)(d.a,{className:o.name,variant:"body2",style:{textAlign:"right"},children:e.awayTeamName.substring(0,e.awayTeamName.length-3)})}),Object(p.jsx)("img",{className:o.crest,src:null===(a=c.find((function(t){return t.name===e.awayTeamName})))||void 0===a?void 0:a.crestUrl,alt:e.homeTeamName})]},e.id)}))})]},e.id)}))}):Object(p.jsx)(d.a,{children:"No predictions yet..."})})]})},de=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{dialogMain:Object(S.a)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:"5px",margin:"32px",backgroundColor:t.secondary.main,color:"#fff"},a.up("md"),{minWidth:"400px"}),title:{width:"100%",padding:"10px",borderRadius:"2px",backgroundColor:t.secondary.dark,textAlign:"center",boxSizing:"border-box"},table:{width:"100%",tableLayout:"fixed"},tableRow:{backgroundColor:"#fff",cursor:"pointer","&:hover":{backgroundColor:"#e0e0e0"}},tableHeadRow:{backgroundColor:t.secondary.light,fontWeight:"bolder"}}})),ue=function(e){var t=e.isOpen,a=e.setIsOpen,n=e.standings,o=de();return Object(p.jsxs)(ie.a,{classes:{paper:o.dialogMain},open:t,onClose:function(){return a(!1)},children:[Object(p.jsx)(d.a,{variant:"h4",component:"h2",className:o.title,children:"Standings"}),Object(p.jsx)(te.a,{children:Object(p.jsxs)(ae.a,{className:o.table,children:[Object(p.jsx)(ne.a,{children:Object(p.jsxs)(oe.a,{className:o.tableHeadRow,children:[Object(p.jsx)(re.a,{size:"small",style:{width:"50px"},children:Object(p.jsx)(d.a,{variant:"body1",children:"P"})}),Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{variant:"body1",children:"Name"})}),Object(p.jsx)(re.a,{align:"right",children:Object(p.jsx)(d.a,{variant:"body1",children:"Points"})})]})}),Object(p.jsx)(ce.a,{children:n.map((function(e,t){return Object(p.jsxs)(oe.a,{className:o.tableRow,children:[Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{noWrap:!0,variant:"body1",children:t+1})}),Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{noWrap:!0,variant:"body1",children:e.username})}),Object(p.jsx)(re.a,{align:"right",children:Object(p.jsx)(d.a,{variant:"body1",children:e.points})})]},e.id)}))})]})})]})};function be(e,t){switch(t.type){case L.setUser:return t.payload}}!function(e){e.setUser="SetPlayers"}(L||(L={}));var pe=Object(r.createContext)([]),me=Object(r.createContext)((function(){return null})),je=function(e){var t=e.children,a=Object(r.useReducer)(be,[]),n=Object(l.a)(a,2),o=n[0],c=n[1];return Object(p.jsx)(pe.Provider,{value:o,children:Object(p.jsx)(me.Provider,{value:c,children:t})})},xe=function(e){var t,a=e.matchdayNumber,n=ee(),o=Object(r.useContext)(x),c=Object(r.useContext)(w),i=Object(r.useContext)(k),s=Object(r.useContext)(pe),m=Object(r.useContext)(me),h=Object(r.useState)(!1),f=Object(l.a)(h,2),O=f[0],g=f[1],v=Object(r.useState)(!1),y=Object(l.a)(v,2),C=y[0],S=y[1],N=Object(r.useState)(null),T=Object(l.a)(N,2),I=T[0],R=T[1],B=Object(r.useMemo)((function(){return s.sort((function(e,t){return t.points-e.points}))}),[s]),P=function(){var e=Object(M.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/users");case 2:t=e.sent,m({type:L.setUser,payload:t.data.users});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){P()}),[]);var z=function(){var e=Object(M.a)(F.a.mark((function e(){var t,a,n,o,r,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=26;break}return e.prev=1,i({type:j.setIsFetching,payload:!0}),t=Object(_.a)(new Date,"yyyy-MM-dd"),e.next=6,fetch("https://api.football-data.org/v2/competitions/2021/matches?dateFrom=2021-08-01&dateTo=".concat(t,"&status=FINISHED"),{headers:{"X-Auth-Token":"d4a9110b90c6415bb3d252836a4bf034"},mode:"cors"});case 6:return a=e.sent,e.next=9,a.json();case 9:return n=e.sent,o=[],e.next=13,V.get("gameweekPredictions");case 13:return r=e.sent,null===(s=r.data.gameweekPredictions)||void 0===s||s.forEach((function(e){var t=0,a=e.matchPredictions.filter((function(e){return!e.isResolved}));(null===a||void 0===a?void 0:a.length)>0&&(a.forEach((function(e){var a,r=null===(a=n.matches)||void 0===a?void 0:a.find((function(t){return t.id===e.matchId})),c=e.isBoosted?1:0,i=Object(b.a)(Object(b.a)({},e),{},{isResolved:!0});r&&null!==(null===r||void 0===r?void 0:r.score.fullTime.homeTeam)&&void 0!==(null===r||void 0===r?void 0:r.score.fullTime.homeTeam)&&null!==(null===r||void 0===r?void 0:r.score.fullTime.awayTeam)&&void 0!==(null===r||void 0===r?void 0:r.score.fullTime.awayTeam)&&(e.homeTeamScore===r.score.fullTime.homeTeam&&e.awayTeamScore===r.score.fullTime.awayTeam?(t+=3+3*c,i=Object(b.a)(Object(b.a)({},i),{},{isExactScore:!0,isCorrectScore:!0,points:3+3*c})):e.homeTeamScore>e.awayTeamScore&&r.score.fullTime.homeTeam>r.score.fullTime.awayTeam||e.homeTeamScore===e.awayTeamScore&&r.score.fullTime.homeTeam===r.score.fullTime.awayTeam||e.homeTeamScore<e.awayTeamScore&&r.score.fullTime.homeTeam<r.score.fullTime.awayTeam?(t+=1+1*c,i=Object(b.a)(Object(b.a)({},i),{},{isExactScore:!1,isCorrectScore:!0,points:1+1*c})):i=Object(b.a)(Object(b.a)({},i),{},{isExactScore:!1,isCorrectScore:!1,points:0}),o.push(V.put("/prediction",i).catch((function(e){return console.log(e)}))))})),o.push(V.put("/user",{UserId:e.UserId,points:t}).catch((function(e){return console.log(e)}))))})),e.next=18,Promise.all(o);case 18:i({type:j.setIsFetching,payload:!1}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0),i({type:j.setIsFetching,payload:!1});case 25:P();case 26:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}(),E=function(e){(null===o||void 0===o?void 0:o.user)&&(R(e),g(!0))};return Object(p.jsxs)("div",{className:n.container,children:[Object(p.jsxs)("div",{className:n.tableContainer,children:[Object(p.jsx)(d.a,{className:n.tableName,variant:"body1",children:"Standings"}),Object(p.jsx)(te.a,{children:Object(p.jsxs)(ae.a,{className:n.table,children:[Object(p.jsx)(ne.a,{children:Object(p.jsxs)(oe.a,{className:n.tableHeadRow,children:[Object(p.jsx)(re.a,{size:"small",style:{width:"50px"},children:Object(p.jsx)(d.a,{variant:"body1",children:"P"})}),Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{variant:"body1",children:"Name"})}),Object(p.jsx)(re.a,{align:"right",children:Object(p.jsx)(d.a,{variant:"body1",children:"Points"})})]})}),B.length<=10?Object(p.jsx)(ce.a,{children:B.map((function(e,t){return Object(p.jsxs)(oe.a,{className:n.tableRow,onClick:function(){return E(e)},tabIndex:0,role:"button",children:[Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{noWrap:!0,variant:"body1",children:t+1})}),Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{noWrap:!0,variant:"body1",children:e.username})}),Object(p.jsx)(re.a,{align:"right",children:Object(p.jsx)(d.a,{variant:"body1",children:e.points})})]},e.id)}))}):Object(p.jsxs)(ce.a,{children:[B.slice(0,10).map((function(e,t){return Object(p.jsxs)(oe.a,{className:n.tableRow,onClick:function(){return E(e)},tabIndex:0,role:"button",children:[Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{noWrap:!0,variant:"body1",children:t+1})}),Object(p.jsx)(re.a,{children:Object(p.jsx)(d.a,{noWrap:!0,variant:"body1",children:e.username})}),Object(p.jsx)(re.a,{align:"right",children:Object(p.jsx)(d.a,{variant:"body1",children:e.points})})]},e.id)})),Object(p.jsx)(oe.a,{className:n.tableRow,children:Object(p.jsx)(re.a,{variant:"footer",colSpan:3,children:Object(p.jsx)(d.a,{variant:"body1",children:". . ."})})})]})]})})]}),B.length>10&&Object(p.jsx)(u.a,{className:n.button,onClick:function(){return S(!0)},children:"Display all"}),"Admin"===(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.role)&&Object(p.jsx)(u.a,{className:n.button,onClick:z,children:"Update Standings"}),Object(p.jsx)(le,{isOpen:O,setIsOpen:g,player:I,matchdayNumber:a}),Object(p.jsx)(ue,{isOpen:C,setIsOpen:S,standings:B})]})},he=function(e){var t=e.setIsModalOpen,a=U(),o=Object(r.useContext)(D),c=Object(r.useContext)(x),i=Object(r.useContext)(h),s=Object(r.useContext)(k),u=Object(r.useState)(0),m=Object(l.a)(u,2),f=m[0],O=m[1],g=Object(r.useState)(null),v=Object(l.a)(g,2),w=v[0],C=v[1],S=Object(r.useState)([]),N=Object(l.a)(S,2),T=N[0],I=N[1],R=Object(r.useState)(null),B=Object(l.a)(R,2),P=B[0],z=B[1],A=Object(r.useMemo)((function(){return T}),[T]);Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user")||"{}");e!=={}&&i({type:n.setUser,payload:e})}),[]);var L=Object(r.useCallback)(Object(M.a)(F.a.mark((function e(){var t,a,n,r,i,l,d,u,p,m,x,h,f,g,v;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z(null),s({type:j.setIsFetching,payload:!0}),e.next=5,fetch("https://api.football-data.org/v2/competitions/2021/matches?status=SCHEDULED",{headers:{"X-Auth-Token":"d4a9110b90c6415bb3d252836a4bf034"},mode:"cors"});case 5:return a=e.sent,e.next=8,a.json();case 8:if(n=e.sent,n=Object(b.a)(Object(b.a)({},n),{},{matches:n.matches.filter((function(e){return e.matchday===n.matches[0].matchday}))}),O(null!==(t=n.matches[0].matchday)&&void 0!==t?t:0),!n.matches){e.next=28;break}if(i=n.matches.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{prediction:{homeTeamScore:null,awayTeamScore:null},isSubmited:!1,isResolved:!1,isBoosted:!1})})),!(null===c||void 0===c||null===(r=c.user)||void 0===r?void 0:r.id)){e.next=18;break}return e.next=16,V.post("/userGameweek",{UserId:null===c||void 0===c||null===(l=c.user)||void 0===l?void 0:l.id,gameweek:n.matches[0].matchday,seasonId:n.matches[0].season.id});case 16:p=e.sent,(null===(d=p.data)||void 0===d||null===(u=d.gameweek)||void 0===u?void 0:u.matchPredictions.length)>0?(x=null===(m=p.data)||void 0===m?void 0:m.gameweek.matchPredictions,h=i.map((function(e){var t=x.find((function(t){return t.matchId===e.id}));return t?Object(b.a)(Object(b.a)({},e),{},{prediction:{homeTeamScore:t.homeTeamScore,awayTeamScore:t.awayTeamScore},isSubmited:!0,isResolved:t.isResolved,isExactScore:t.isExactScore,isCorrectScore:t.isCorrectScore,isBoosted:t.isBoosted,points:t.points,GameweekPredictionId:t.GameweekPredictionId}):e})),o({type:y.setFixtures,payload:h})):o({type:y.setFixtures,payload:i});case 18:if(C(i[0].season.id),!(T.length<1)){e.next=28;break}return e.next=22,fetch("https://api.football-data.org/v2/competitions/2021/teams",{headers:{"X-Auth-Token":"d4a9110b90c6415bb3d252836a4bf034"},mode:"cors"});case 22:return f=e.sent,e.next=25,f.json();case 25:g=e.sent,v=g.teams,I(v);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),console.log(e.t0),z("Error. Try again in a minute...");case 34:s({type:j.setIsFetching,payload:!1});case 35:case"end":return e.stop()}}),e,null,[[0,30]])}))),[c,o]);return Object(r.useEffect)((function(){(null===c||void 0===c?void 0:c.user)&&L()}),[null===c||void 0===c?void 0:c.user,L]),Object(p.jsx)(E.a,{className:a.container,children:P?Object(p.jsx)(d.a,{variant:"h5",className:a.error,children:P}):Object(p.jsxs)(H.Provider,{value:A,children:[Object(p.jsxs)(E.a,{className:a.mainContent,children:[Object(p.jsx)($,{setIsModalOpen:t,matchdayNumber:f,seasonId:w}),Object(p.jsx)(xe,{matchdayNumber:f,seasonId:w})]}),Object(p.jsxs)(E.a,{className:a.rulesContainer,children:[Object(p.jsx)(d.a,{className:a.rulesTitle,variant:"h6",children:"Zasady"}),Object(p.jsxs)("ul",{className:a.rulesList,children:[Object(p.jsx)("li",{className:a.rule,children:Object(p.jsxs)(d.a,{children:["Wytypowanie dok\u0142adnego wyniku meczu - ",Object(p.jsx)("span",{className:a.accentGreen,children:"3 pkt"})]})}),Object(p.jsx)("li",{className:a.rule,children:Object(p.jsxs)(d.a,{children:["Wytypowanie zwyci\u0119zcy (remisu) - ",Object(p.jsx)("span",{className:a.accentBlue,children:"1 pkt"})]})}),Object(p.jsx)("li",{className:a.rule,children:Object(p.jsxs)(d.a,{className:a.ruleText,children:["Boost ",Object(p.jsx)("span",{className:a.accent,children:Object(p.jsx)(Z.a,{})})," jest do wykorzystania w ka\u017cdej kolejce i podwaja zdobyte punkty za dany typ"]})}),Object(p.jsx)("li",{className:a.rule,children:Object(p.jsx)(d.a,{className:a.ruleText,children:"Nie trzeba przesy\u0142a\u0107 wszystkich typ\xf3w jednocze\u015bnie"})}),Object(p.jsx)("li",{className:a.rule,children:Object(p.jsx)(d.a,{className:a.ruleText,children:"By sprawdzi\u0107 typy innego zawodnika, kliknij jego nazw\u0119 w tabeli"})})]})]})]})})},fe=Object(N.a)((function(e){var t=e.palette,a=e.breakpoints;return{modal:Object(S.a)({width:"100%",backgroundColor:t.secondary.dark,border:"1px solid ".concat(t.secondary.main),borderRadius:"2px",display:"flex",justifyContent:"center",boxSizing:"border-box",boxShadow:"1px 1px 15px 3px #00000060"},a.up("md"),{minWidth:"400px"}),modalContent:{padding:"20px",width:"80%",color:"white",textAlign:"center"},validationMessage:{color:t.secondary.contrastText,margin:"10px 0"},inputContainer:{width:"100%",display:"flex",flexDirection:"column",marginTop:"10px",textAlign:"left"},input:{outline:"none",borderRadius:"2px",border:"none",padding:"5px",marginTop:"5px",backgroundColor:t.secondary.main,color:"#fff",fontSize:"1.1rem","&:focus":{backgroundColor:t.secondary.light}},button:{backgroundColor:"#fff",marginTop:"45px",width:"100%","&:hover":{backgroundColor:"#e0e0e0"}}}})),Oe=function(e){var t=e.isModalOpen,a=e.setIsModalOpen,o=fe(),c=Object(r.useState)({login:"",password:""}),i=Object(l.a)(c,2),s=i[0],m=i[1],x=Object(r.useState)(""),f=Object(l.a)(x,2),O=f[0],g=f[1],v=Object(r.useContext)(h),y=Object(r.useContext)(me),C=Object(r.useContext)(w),S=Object(r.useContext)(k),N=function(){a(Object(b.a)(Object(b.a)({},t),{},{isOpen:!1})),m({login:"",password:""}),g("")},T=function(){return Object.values(s).some((function(e){return""===e}))?(g("Please fill in all the required fields"),!1):(g(""),!0)},I=function(){var e=Object(M.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T()||C){e.next=18;break}return e.prev=2,S({type:j.setIsFetching,payload:!0}),e.next=6,V.post("/userCreate",{username:s.login,password:s.password,role:"User"});case 6:return t=e.sent,e.next=9,V.get("/users");case 9:a=e.sent,y({type:L.setUser,payload:a.data.users}),g(t.data.message),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),S({type:j.setIsFetching,payload:!1});case 18:S({type:j.setIsFetching,payload:!1});case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(M.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T()||C){e.next=15;break}return e.prev=2,S({type:j.setIsFetching,payload:!0}),e.next=6,V.post("/user",{username:s.login,password:s.password});case 6:t=e.sent,g(t.data.message),t.data.user&&(v({type:n.setUser,payload:t.data.user}),localStorage.setItem("user",JSON.stringify(t.data.user)),N()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),S({type:j.setIsFetching,payload:!1});case 15:S({type:j.setIsFetching,payload:!1});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(ie.a,{open:t.isOpen,onClose:N,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(p.jsx)("div",{className:o.modal,children:Object(p.jsxs)("div",{className:o.modalContent,children:[Object(p.jsx)(d.a,{variant:"body1",children:"register"===t.target?"Register Account":"Log In"}),Object(p.jsx)(d.a,{variant:"body1",className:o.validationMessage,children:O}),Object(p.jsxs)("div",{className:o.inputContainer,children:[Object(p.jsx)("label",{children:"Login"}),Object(p.jsx)("input",{className:o.input,type:"text",value:s.login,onChange:function(e){return m(Object(b.a)(Object(b.a)({},s),{},{login:e.target.value}))}})]}),Object(p.jsxs)("div",{className:o.inputContainer,children:[Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{className:o.input,type:"password",value:s.password,onChange:function(e){return m(Object(b.a)(Object(b.a)({},s),{},{password:e.target.value}))}})]}),Object(p.jsx)(u.a,{className:o.button,onClick:"register"===t.target?I:R,children:"register"===t.target?"Register":"Log In"})]})})})},ge=(a(112),a(67)),ve=a(147),ye=Object(ge.a)({palette:{primary:{light:"#8e8e8e",main:"#616161",dark:"#373737",contrastText:"#fff"},secondary:{light:"#faa68d",main:"#f88a62",dark:"#f87c4f",contrastText:"#000"}},typography:{fontFamily:["Roboto","sans-serif"].join()}}),we=function(){var e=Object(r.useState)({isOpen:!1,target:"log-in"}),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(p.jsx)("div",{className:"app",children:Object(p.jsx)(ve.a,{theme:ye,children:Object(p.jsx)(C,{children:Object(p.jsx)(f,{children:Object(p.jsx)(je,{children:Object(p.jsxs)(G,{children:[Object(p.jsx)(Oe,{isModalOpen:a,setIsModalOpen:n}),Object(p.jsx)(P,{setIsModalOpen:n}),Object(p.jsx)(he,{setIsModalOpen:n})]})})})})})})},ke=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,154)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),r(e),c(e)}))};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(we,{})}),document.getElementById("root")),ke()},78:function(e,t,a){}},[[113,1,2]]]);
//# sourceMappingURL=main.9960987e.chunk.js.map